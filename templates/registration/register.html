{% extends "parent/main.html" %}
{% load static %}

{% block body %}
  <div class="container mt-3 ">
    <div class="row justify-content-center">
      <div class="col-lg-12">
        {% if form.errors %}
          <p>
          نام کاربری یا پسورد شما درست نبود.
          </p>
        {% endif %}
        {% if next %}
            {% if user.is_authenticated %}
              <p>Your account doesn't have access to this page. To proceed,
              please login with an account that has access.</p>
            {% else %}
            <p>
        برای دیدن این صفحه باید لاگین کنید
            </p>
            {% endif %}
        {% endif %}  
    {% if message %}
      <div class="alert alert-danger alert-dismissible">
        <a href="#" class="close" data-dismiss = "alert">&times;</a>
        <h5>{{ message|safe }}</h5>
      </div>
    {% endif %}
    </div>
    </div>
    {% if not user.is_authenticated %}
    <div class="row justify-content-center ">
      <div class="col-md-6 col-lg-8 col-md-offset-3">
        <div class="panel panel-default registerForm p-3">
          <div class="bg-info p-2 text-center rounded">
            <h3 class="panel-title text-white">ثبت نام</h3>
          </div>
          <br>
          <div class="panel-body">
            <form class="form-horizontal" method="POST" autocomplete="on">
              {% csrf_token %}
              <input type="hidden" name="requestcode" value="True" />
              <input type="hidden" name="next" value="{{ next }}" />
              <div class="form-group">
                <label for="first_name" class="col-sm-2 control-label" >نام</label>
                <div class="col-sm-10">
                  <input type="text"  name="first_name" class="form-control" placeholder="حداقل سه کاراکتر" required pattern=".{3,}" value = "{% if fistNameBack %} {{ fistNameBack }} {% endif %}">
                </div>
              </div>
              <div class="form-group">
                <label for="username" class="col-sm-2 control-label" >نام کاربری</label>
                <div class="col-sm-10">
                  <input type="text" name="username" class="form-control" placeholder="حداقل سه کاراکتر" required pattern=".{3,}" value = "{% if userBack %} {{ userBack }} {% endif %}">
                </div>
              </div>
              <div class="form-group">
                <label for="inputPassword3" class="col-sm-2 control-label">ایمیل شما</label>
                <div class="col-sm-10">
                  <input type="email" name="email" class="form-control"  placeholder="لینک تایید ساخت اکانت به این آدرس فرستاده می‌شود" required value = "{% if emailBack %} {{ emailBack }} {% endif %}">
                </div>
              </div>
              <div class="form-group">
                <label for="password1" class="col-sm-2 control-label" >کلمه عبور</label>
                <div class="col-sm-10">
                  <input type="password" id="password1" name="password" class="form-control"  placeholder="حداقل هشت کاراکتر" required pattern=".{8,}">
                </div>
              </div>
              <div class="form-group">
                <label for="passwordConfirm" class="col-sm-2 control-label" style="white-space: nowrap;" >تکرار کلمه عبور</label>
                <div class="col-sm-10">
                  <input type="password" id = "passwordConfirm" name="passwordConfirm" class="form-control"  placeholder="رمز عبور خود را مجددا وارد کنید" required pattern=".{8,}">
                </div>
              </div>
              <div class="form-group">
                <label for="capchazp" class="col-sm-2 control-label" style="white-space: nowrap;">ربات نیستید؟</label>
                <div class="col-sm-10">
                  <div class="g-recaptcha" id = "capchazp" data-sitekey="6LeN68QZAAAAAIvlhewcYYAoPaELv5QomP_RPtr5"></div>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                  <button type="submit" class="btn btn-outline-success" style="padding-left : 25px;padding-right : 25px;">ثبت</button>
                </div>
              </div>
            </form>
            <ul style="list-style-type: none; " class="p-1 mr-3">
              <li><a href="{% url 'web:login' %}">حساب دارم</a></li>
            <ul>
          </div>
        </div>
      </div>
    </div>
    {% else %}
      <div class="container">
        <div class="row justify-content-center ">
          <div class="col-12 text-center">
            <div class="content registerForm p-3">
              <div class="content-body">
                <h3>
                  برای دیدن این صفحه ابتدا باید <a href="{% url 'logout' %}" style="text-decoration:none">خارج</a> شوید
                </h3>
              </div>
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
      </div>
    {% endif %}
  </div>
  <br><br>
<script src="https://www.google.com/recaptcha/api.js?hl=fa"></script>
{% endblock %}